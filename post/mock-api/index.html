<!doctype html><html lang=es itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Mock API - Programación desordenada</title><meta name=description content="Sin backend, pero con mock al rescate"><meta name=author content="Sergio León"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Programación desordenada","url":"https:\/\/panicoenlaxbox.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/panicoenlaxbox.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/panicoenlaxbox.com","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/panicoenlaxbox.com\/post\/mock-api\/","name":"Mock API"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Sergio León"},"headline":"Mock API","description":"No siempre hay un API lista para consumir del lado del servidor, así que vamos a explorar distintas opciones en Angular para poder sobrevivir del lado cliente sin tener que esperar a que los \u0026ldquo;otros\u0026rdquo; hagan su trabajo.\n","inLanguage":"es","wordCount":1867,"datePublished":"2025-01-18T09:35:00","dateModified":"2025-01-18T09:35:00","image":"https:\/\/panicoenlaxbox.com\/img\/avatar-icon.png","keywords":["angular"],"mainEntityOfPage":"https:\/\/panicoenlaxbox.com\/post\/mock-api\/","publisher":{"@type":"Organization","name":"https:\/\/panicoenlaxbox.com","logo":{"@type":"ImageObject","url":"https:\/\/panicoenlaxbox.com\/img\/avatar-icon.png","height":60,"width":60}}}</script><meta property="og:title" content="Mock API"><meta property="og:description" content="Sin backend, pero con mock al rescate"><meta property="og:image" content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta property="og:url" content="https://panicoenlaxbox.com/post/mock-api/"><meta property="og:type" content="website"><meta property="og:site_name" content="Programación desordenada"><meta name=twitter:title content="Mock API"><meta name=twitter:description content="Sin backend, pero con mock al rescate"><meta name=twitter:image content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta name=twitter:card content="summary"><meta name=twitter:site content="@panicoenlaxbox"><meta name=twitter:creator content="@panicoenlaxbox"><link href=https://panicoenlaxbox.com/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.115.2"><link rel=alternate href=https://panicoenlaxbox.com/index.xml type=application/rss+xml title="Programación desordenada"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://panicoenlaxbox.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://panicoenlaxbox.com/css/highlight.min.css><link rel=stylesheet href=https://panicoenlaxbox.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><style>.intro-header .archive-heading{text-align:center}.intro-header .archive-heading h1{margin-top:0;font-size:50px}@media only screen and (min-width:768px){.intro-header .archive-heading h1{font-size:80px}}.post-entry a{color:#008aff}body.dark-mode,body.dark-mode main *{background:#2d2d2d;color:#f5f5f5}body.dark-mode .post-title,body.dark-mode .post-subtitle{color:#f5f5f5}body.dark-mode .post-entry a{color:#008aff}body.dark-mode table tr th,body.dark-mode table tr td{color:#333}blockquote{margin:20px}table{margin-top:10px}</style><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-57023975-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Conmuta navegación</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://panicoenlaxbox.com>Programación desordenada</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Tags href=/tags>Tags</a></li><li><a title=Archive href=/archive>Archive</a></li><li><a title=About href=/about>About</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Programación desordenada" href=https://panicoenlaxbox.com><img class=avatar-img src=https://panicoenlaxbox.com/img/avatar-icon.png alt="Programación desordenada"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Mock API</h1><h2 class=post-subheading>Sin backend, pero con mock al rescate</h2><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Publicado el January 18, 2025</span></div></div></div></div></div></header><div class=js-toggle-wrapper><div class=js-toggle><div class=js-toggle-track><div class=js-toggle-track-check><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=16 height=16></div><div class=js-toggle-track-x><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=16 height=16></div></div><div class=js-toggle-thumb></div><input class=js-toggle-screenreader-only type=checkbox aria-label="Switch between Dark and Light mode"></div></div><style>.js-toggle-wrapper{display:table;margin:0 auto}.js-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent}.js-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.js-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.js-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-check{opacity:1;transition:opacity .25s ease}.js-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:1;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-x{opacity:0}.js-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1)0ms;transform:translateX(0)}.js-toggle--checked .js-toggle-thumb{transform:translateX(26px);border-color:#19ab27}.js-toggle--focus .js-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.js-toggle:active .js-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><script>var body=document.body,switcher=document.getElementsByClassName("js-toggle")[0];switcher.addEventListener("click",function(){this.classList.toggle("js-toggle--checked"),this.classList.add("js-toggle--focus"),this.classList.contains("js-toggle--checked")?(body.classList.add("dark-mode"),localStorage.setItem("darkMode","true")):(body.classList.remove("dark-mode"),setTimeout(function(){localStorage.removeItem("darkMode")},100))}),localStorage.getItem("darkMode")&&(switcher.classList.add("js-toggle--checked"),body.classList.add("dark-mode"))</script><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>No siempre hay un API lista para consumir del lado del servidor, así que vamos a explorar distintas opciones en <a href=https://angular.dev/>Angular</a> para poder sobrevivir del lado cliente sin tener que esperar a que los <em>&ldquo;otros&rdquo;</em> hagan su trabajo.</p><p>En un mundo ideal deberíamos usar la <a href=https://swagger.io/specification/>especificación OpenAPI</a> y un enfoque <a href=https://swagger.io/resources/articles/adopting-an-api-first-approach/>API-first</a>, pero para este post usaré código de servidor (que por supuesto <em>no estará disponible para el front</em>) para explicar el contrato.</p><blockquote><p>Si igualmente te apetece probar api-first, herramientas como <a href=https://editor.swagger.io/>https://editor.swagger.io/</a> o <a href=https://www.apicur.io/studio/>https://www.apicur.io/studio/</a> podrían serte de mucha utilidad.</p></blockquote><div class=highlight><pre tabindex=0 class=chroma><code class=language-csharp data-lang=csharp><span class=line><span class=cl><span class=n>app</span><span class=p>.</span><span class=n>MapGet</span><span class=p>(</span><span class=s>&#34;/todos&#34;</span><span class=p>,</span> <span class=p>(</span><span class=kt>string?</span> <span class=n>title</span><span class=p>,</span> <span class=kt>string?</span> <span class=n>description</span><span class=p>,</span> <span class=kt>bool?</span> <span class=n>isCompleted</span><span class=p>)</span> <span class=p>=&gt;</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>GetTodos</span><span class=p>(</span><span class=n>title</span><span class=p>,</span> <span class=n>description</span><span class=p>,</span> <span class=n>isCompleted</span><span class=p>,</span> <span class=n>todos</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// ...</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>public</span> <span class=k>class</span> <span class=nc>Todo</span><span class=p>(</span><span class=kt>int</span> <span class=n>id</span><span class=p>,</span> <span class=kt>string</span> <span class=n>title</span><span class=p>,</span> <span class=kt>string?</span> <span class=n>description</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>isCompleted</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>int</span> <span class=n>Id</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>init</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=n>id</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string</span> <span class=n>Title</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>init</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=n>title</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>string?</span> <span class=n>Description</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>init</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=n>description</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>public</span> <span class=kt>bool</span> <span class=n>IsCompleted</span> <span class=p>{</span> <span class=k>get</span><span class=p>;</span> <span class=k>init</span><span class=p>;</span> <span class=p>}</span> <span class=p>=</span> <span class=n>isCompleted</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Es resumen, un endpoint <code>GET todos?title=&amp;description=&amp;isCompleted</code> que devolverá una lista de <code>Todo</code>.</p><blockquote><p>La versión de Angular que estoy usando es la <a href=https://www.npmjs.com/package/@angular/cli/v/19.0.2>19.0.2</a>.</p></blockquote><p><code>todo.ts</code> será como sigue:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>interface</span> <span class=nx>Todo</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>id</span>: <span class=kt>number</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>title</span>: <span class=kt>string</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>description</span>: <span class=kt>string</span> <span class=o>|</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nx>isCompleted</span>: <span class=kt>boolean</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>En cuando al componente, va a ser siempre el mismo con independencia del servicio, es decir, a él esto de mockear la API ni le va ni le viene.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Component</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>TodoService</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;../todo.service&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>CommonModule</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/common&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Observable</span><span class=p>,</span> <span class=k>of</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;rxjs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Todo</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;../todo&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>FormBuilder</span><span class=p>,</span> <span class=nx>FormGroup</span><span class=p>,</span> <span class=nx>ReactiveFormsModule</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/forms&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Component</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>selector</span><span class=o>:</span> <span class=s1>&#39;app-todo-list&#39;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>imports</span><span class=o>:</span> <span class=p>[</span><span class=nx>CommonModule</span><span class=p>,</span> <span class=nx>ReactiveFormsModule</span><span class=p>],</span>
</span></span><span class=line><span class=cl>  <span class=nx>template</span><span class=o>:</span> <span class=sb>`
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;form [formGroup]=&#34;searchForm&#34; (ngSubmit)=&#34;onSubmit()&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;label for=&#34;title&#34;&gt;Title:&lt;/label&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;input id=&#34;title&#34; type=&#34;text&#34; formControlName=&#34;title&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;label for=&#34;description&#34;&gt;Description:&lt;/label&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;input id=&#34;description&#34; type=&#34;text&#34; formControlName=&#34;description&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;label for=&#34;isCompleted&#34;&gt;Completed:&lt;/label&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;select id=&#34;isCompleted&#34; formControlName=&#34;isCompleted&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=sb>          &lt;option value=&#34;&#34;&gt;&lt;/option&gt;
</span></span></span><span class=line><span class=cl><span class=sb>          &lt;option value=&#34;true&#34;&gt;Yes&lt;/option&gt;
</span></span></span><span class=line><span class=cl><span class=sb>          &lt;option value=&#34;false&#34;&gt;No&lt;/option&gt;
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;/select&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      
</span></span></span><span class=line><span class=cl><span class=sb>      &lt;button type=&#34;submit&#34;&gt;Search&lt;/button&gt;
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;/form&gt;
</span></span></span><span class=line><span class=cl><span class=sb>
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;ul&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      @for (todo of (todos$ | async); track todo.id) {    
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;li&gt;
</span></span></span><span class=line><span class=cl><span class=sb>          {{ todo | json }}
</span></span></span><span class=line><span class=cl><span class=sb>        &lt;/li&gt;
</span></span></span><span class=line><span class=cl><span class=sb>      }    
</span></span></span><span class=line><span class=cl><span class=sb>    &lt;/ul&gt;
</span></span></span><span class=line><span class=cl><span class=sb>  `</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>styleUrl</span><span class=o>:</span> <span class=s1>&#39;./todo-list.component.scss&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoListComponent</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>todos$</span>: <span class=kt>Observable</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;</span> <span class=o>=</span> <span class=k>of</span><span class=p>([]);</span>
</span></span><span class=line><span class=cl>  <span class=nx>searchForm</span>: <span class=kt>FormGroup</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>public</span> <span class=nx>todoService</span>: <span class=kt>TodoService</span><span class=p>,</span> <span class=kr>private</span> <span class=nx>fb</span>: <span class=kt>FormBuilder</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>searchForm</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>fb</span><span class=p>.</span><span class=nx>group</span><span class=p>({</span>
</span></span><span class=line><span class=cl>      <span class=nx>title</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>description</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;&#39;</span><span class=p>],</span>
</span></span><span class=line><span class=cl>      <span class=nx>isCompleted</span><span class=o>:</span> <span class=p>[</span><span class=s1>&#39;&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>onSubmit() {</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=p>{</span> <span class=nx>title</span><span class=p>,</span> <span class=nx>description</span><span class=p>,</span> <span class=nx>isCompleted</span> <span class=p>}</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>searchForm</span><span class=p>.</span><span class=nx>value</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>completedValue</span> <span class=o>=</span> <span class=nx>isCompleted</span> <span class=o>===</span> <span class=s1>&#39;&#39;</span> <span class=o>?</span> <span class=kc>undefined</span> <span class=o>:</span>
</span></span><span class=line><span class=cl>      <span class=nx>isCompleted</span> <span class=o>===</span> <span class=s1>&#39;true&#39;</span> <span class=o>?</span> <span class=kc>true</span> <span class=o>:</span> <span class=kc>false</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=p>.</span><span class=nx>todos$</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>todoService</span><span class=p>.</span><span class=nx>getTodos</span><span class=p>(</span><span class=nx>title</span><span class=p>,</span> <span class=nx>description</span><span class=p>,</span> <span class=nx>completedValue</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Y es a partir de aquí donde tenemos que mockear la API, que <em>se la espera pero no está</em>.</p><p>Básicamente vamos a usar dos aproximaciones distintas, usando un servicio u usando un <a href=https://angular.dev/guide/http/interceptors>interceptor</a>.</p><p>Con el servicio sería algo así:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Injectable</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Observable</span><span class=p>,</span> <span class=k>of</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;rxjs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Todo</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./todo&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Injectable</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>providedIn</span><span class=o>:</span> <span class=s1>&#39;root&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=kr>readonly</span> <span class=nx>todos</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>id</span>: <span class=kt>1</span><span class=p>,</span> <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Todo 1&#39;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;Description 1&#39;</span><span class=p>,</span> <span class=nx>isCompleted</span>: <span class=kt>true</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>id</span>: <span class=kt>2</span><span class=p>,</span> <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Todo 2&#39;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;Description 2&#39;</span><span class=p>,</span> <span class=nx>isCompleted</span>: <span class=kt>false</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span> <span class=nx>id</span>: <span class=kt>3</span><span class=p>,</span> <span class=nx>title</span><span class=o>:</span> <span class=s1>&#39;Todo 3&#39;</span><span class=p>,</span> <span class=nx>description</span><span class=o>:</span> <span class=s1>&#39;Description 3&#39;</span><span class=p>,</span> <span class=nx>isCompleted</span>: <span class=kt>true</span> <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>getTodos</span><span class=p>(</span><span class=nx>title?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>description?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>isCompleted?</span>: <span class=kt>boolean</span><span class=p>)</span><span class=o>:</span> <span class=nx>Observable</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=k>this</span><span class=p>.</span><span class=nx>todos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>title</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>description</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>description</span><span class=o>?</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>description</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>isCompleted</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>isCompleted</span> <span class=o>===</span> <span class=nx>isCompleted</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>of</span><span class=p>(</span><span class=nx>filteredTodos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Hay algunas variaciones que podría interesarnos, como guardar los datos en un fichero <code>.json</code> o usar directamente <code>HttpClient</code>.</p><p>Para usar un fichero <code>.json</code>, se importa y ¡listo! <em>easy peasy</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=nx>todos</span> <span class=kr>from</span> <span class=s1>&#39;./todos.json&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Injectable</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>providedIn</span><span class=o>:</span> <span class=s1>&#39;root&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>getTodos</span><span class=p>(</span><span class=nx>title?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>description?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>isCompleted?</span>: <span class=kt>boolean</span><span class=p>)</span><span class=o>:</span> <span class=nx>Observable</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;</span> <span class=p>{</span>    
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>todos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Si queremos usar <code>HttpClient</code>, tendremos que guardar el fichero <code>.json</code> en la carpeta <a href=https://angular.dev/reference/configs/file-structure#workspace-configuration-files>public/</a> y usar <em>rxjs</em> para filtrar los datos.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Injectable</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/core&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>map</span><span class=p>,</span> <span class=nx>Observable</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;rxjs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Todo</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./todo&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>HttpClient</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/common/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>@Injectable</span><span class=p>({</span>
</span></span><span class=line><span class=cl>  <span class=nx>providedIn</span><span class=o>:</span> <span class=s1>&#39;root&#39;</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>httpClient</span>: <span class=kt>HttpClient</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>getTodos</span><span class=p>(</span><span class=nx>title?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>description?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>isCompleted?</span>: <span class=kt>boolean</span><span class=p>)</span><span class=o>:</span> <span class=nx>Observable</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>httpClient</span><span class=p>.</span><span class=kr>get</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;(</span><span class=s1>&#39;/todos&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>El problema de cualquiera de estas soluciones es que estamos escribiendo código en el servicio que no será el de producción.</p><p>Lo normal sería usar <a href=https://angular.dev/tools/cli/environments#>environments</a> y, opcionalmente, un <a href=https://angular.dev/api/core/InjectionToken>InjectionToken</a>.</p><p>Con esto el servicio quedaría así:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>private</span> <span class=nx>baseUrl</span> <span class=o>=</span> <span class=nx>environment</span><span class=p>.</span><span class=nx>apiUrl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kr>private</span> <span class=nx>httpClient</span>: <span class=kt>HttpClient</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nx>getTodos</span><span class=p>(</span><span class=nx>title?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>description?</span>: <span class=kt>string</span><span class=p>,</span> <span class=nx>isCompleted?</span>: <span class=kt>boolean</span><span class=p>)</span><span class=o>:</span> <span class=nx>Observable</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>params</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>HttpParams</span><span class=p>();</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>params</span> <span class=o>=</span> <span class=nx>params</span><span class=p>.</span><span class=kr>set</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>,</span> <span class=nx>title</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>description</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>params</span> <span class=o>=</span> <span class=nx>params</span><span class=p>.</span><span class=kr>set</span><span class=p>(</span><span class=s1>&#39;description&#39;</span><span class=p>,</span> <span class=nx>description</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>isCompleted</span> <span class=o>!==</span> <span class=kc>undefined</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>params</span> <span class=o>=</span> <span class=nx>params</span><span class=p>.</span><span class=kr>set</span><span class=p>(</span><span class=s1>&#39;isCompleted&#39;</span><span class=p>,</span> <span class=nx>isCompleted</span><span class=p>.</span><span class=nx>toString</span><span class=p>());</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>this</span><span class=p>.</span><span class=nx>httpClient</span><span class=p>.</span><span class=kr>get</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;(</span><span class=sb>`</span><span class=si>${</span><span class=k>this</span><span class=p>.</span><span class=nx>baseUrl</span><span class=si>}</span><span class=sb>/todos`</span><span class=p>,</span> <span class=p>{</span> <span class=nx>params</span> <span class=p>});</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>O si usamos <code>InjectionToken</code> (que nos dará más flexibilidad) así:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kd>@Inject</span><span class=p>(</span><span class=nx>API_BASE_URL</span><span class=p>)</span> <span class=kr>private</span> <span class=nx>baseUrl</span>: <span class=kt>string</span><span class=p>,</span> <span class=kr>private</span> <span class=nx>httpClient</span>: <span class=kt>HttpClient</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div><p>En este momento, nuestro servicio ya no mockea la API (por un momento no hemos venido arriba y hemos preferido obviar que la API no está disponible todavía), así que tenemos dos opciones para seguir trabajando:</p><ul><li>Usar DI para inyectar un servicio fake en vez de la implementación real.</li><li>Usar un <code>HttpInterceptor</code> y seguir teniendo sólo una implementación del servicio.</li></ul><p>Para usar DI, crearemos un interfaz <code>TodoService</code> (tomamos prestado el nombre para el contrato) y dos implementaciones: <code>HttpTodoService</code> y <code>FakeTodoService</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Observable</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;rxjs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Todo</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./todo&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>interface</span> <span class=nx>TodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>getTodos</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=nx>title?</span>: <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>description?</span>: <span class=kt>string</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nx>isCompleted?</span>: <span class=kt>boolean</span><span class=p>)</span><span class=o>:</span> <span class=nx>Observable</span><span class=p>&lt;</span><span class=nt>Todo</span><span class=err>[]</span><span class=p>&gt;;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>TodoService</span> <span class=kr>implements</span> <span class=nx>BaseTodoService</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=kr>constructor</span><span class=p>(</span><span class=kd>@Inject</span><span class=p>(</span><span class=nx>API_BASE_URL</span><span class=p>)</span> <span class=kr>private</span> <span class=nx>baseUrl</span>: <span class=kt>string</span><span class=p>,</span> <span class=kr>private</span> <span class=nx>httpClient</span>: <span class=kt>HttpClient</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>class</span> <span class=nx>FakeTodoService</span> <span class=kr>implements</span> <span class=nx>BaseTodoService</span> <span class=p>{</span>
</span></span></code></pre></div><p>Ahora toca decidir que implementación resolverá DI (<code>app.config.ts</code>) y actualizar la dependencia al tipo base en el componente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>TODO_SERVICE_TOKEN</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>InjectionToken</span><span class=p>&lt;</span><span class=nt>TodoService</span><span class=p>&gt;(</span><span class=s1>&#39;TodoService&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>{</span> <span class=nx>provide</span>: <span class=kt>TODO_SERVICE_TOKEN</span><span class=p>,</span> <span class=nx>useClass</span>: <span class=kt>environment.production</span> <span class=o>?</span> <span class=nx>HttpTodoService</span> : <span class=kt>FakeTodoService</span> <span class=p>}</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>constructor</span><span class=p>(</span><span class=kd>@Inject</span><span class=p>(</span><span class=nx>TODO_SERVICE_TOKEN</span><span class=p>)</span> <span class=kr>private</span> <span class=nx>todoService</span>: <span class=kt>TodoService</span><span class=p>,</span> <span class=kr>private</span> <span class=nx>fb</span>: <span class=kt>FormBuilder</span><span class=p>)</span> <span class=p>{</span>
</span></span></code></pre></div><p>Si optamos por el interceptor, existirá solamente de nuevo <code>TodoService</code> y es un escalón más abajo en el framework donde mockearemos la API. Es decir, ahora que no esté la API disponible en el servidor no le importa ya sólo al componente, sino también al servicio.</p><p>El interceptor es como sigue:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>Observable</span><span class=p>,</span> <span class=k>of</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;rxjs&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>todos</span> <span class=kr>from</span> <span class=s1>&#39;./todos.json&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>HttpEvent</span><span class=p>,</span> <span class=nx>HttpHandlerFn</span><span class=p>,</span> <span class=nx>HttpInterceptorFn</span><span class=p>,</span> <span class=nx>HttpRequest</span><span class=p>,</span> <span class=nx>HttpResponse</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/common/http&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>todoInterceptor</span>: <span class=kt>HttpInterceptorFn</span> <span class=o>=</span> <span class=p>(</span><span class=nx>req</span>: <span class=kt>HttpRequest</span><span class=p>&lt;</span><span class=nt>unknown</span><span class=p>&gt;,</span> <span class=nx>next</span>: <span class=kt>HttpHandlerFn</span><span class=p>)</span><span class=o>:</span> <span class=nx>Observable</span><span class=p>&lt;</span><span class=nt>HttpEvent</span><span class=err>&lt;</span><span class=na>unknown</span><span class=p>&gt;</span><span class=o>&gt;</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>req</span><span class=p>.</span><span class=nx>url</span><span class=p>.</span><span class=nx>endsWith</span><span class=p>(</span><span class=s1>&#39;/todos&#39;</span><span class=p>)</span> <span class=o>&amp;&amp;</span> <span class=nx>req</span><span class=p>.</span><span class=nx>method</span> <span class=o>===</span> <span class=s1>&#39;GET&#39;</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=kd>let</span> <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>todos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>title</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>description</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;description&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>description</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>description</span><span class=o>?</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>description</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=kr>const</span> <span class=nx>isCompleted</span> <span class=o>=</span> <span class=nx>req</span><span class=p>.</span><span class=nx>params</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;isCompleted&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nx>isCompleted</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>isCompleted</span> <span class=o>===</span> <span class=p>(</span><span class=nx>isCompleted</span><span class=p>.</span><span class=nx>toLowerCase</span><span class=p>()</span> <span class=o>===</span> <span class=s1>&#39;true&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=k>of</span><span class=p>(</span><span class=k>new</span> <span class=nx>HttpResponse</span><span class=p>({</span> <span class=nx>status</span>: <span class=kt>200</span><span class=p>,</span> <span class=nx>body</span>: <span class=kt>filteredTodos</span> <span class=p>}));</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>next</span><span class=p>(</span><span class=nx>req</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span></code></pre></div><p>Y hay que activarlo en <code>app.config.ts</code>:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl>  <span class=nx>providers</span><span class=o>:</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>provideHttpClient</span><span class=p>(</span><span class=nx>withInterceptors</span><span class=p>([</span><span class=nx>todoInterceptor</span><span class=p>])),</span>
</span></span><span class=line><span class=cl>    <span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>]</span>
</span></span></code></pre></div><p>Hasta aquí hemos repasado las principales opciones que nos brinda Angular para salvar este <em>match-ball</em>, pero <em>&ldquo;No se vayan todavía, aún hay más&rdquo;</em> que diría <a href="https://www.youtube.com/watch?v=jHRDdr57feA">Super Ratón</a>.</p><p>Lo que vamos a probar ahora es a <a href=https://www.fundacionlengua.com/es/hacerse-sueco/art/168/>hacernos los suecos</a> en Angular y delegar el mockear la API a un componente externo.</p><p>Hay bastantes recursos en línea para mockear una API:</p><ul><li><a href=https://mockanapi.com/>https://mockanapi.com/</a></li><li><a href=https://www.mockable.io/>https://www.mockable.io/</a></li><li><a href=https://mockapi.io/>https://mockapi.io/</a></li></ul><p>Pero al final, de un modo u otro todos tiene un plan de pago y además depender de un tercero no es la mejor opción.</p><blockquote><p>Para un endpoint rápido (para salir del paso, hacer una prueba, etc.), me gusta <a href=https://designer.mocky.io/>https://designer.mocky.io/</a>. Si el endpoint te da igual, por supuesto siempre puedes usar <a href=https://jsonplaceholder.typicode.com/>https://jsonplaceholder.typicode.com/</a>.</p></blockquote><p>Sin embargo, hay otras opciones que nos van a permitir mockear una API como unos autenticos <em>pro</em>.</p><ul><li><a href=https://mswjs.io/>https://mswjs.io/</a></li><li><a href=https://mockoon.com/>https://mockoon.com/</a></li></ul><p>Mock Service Worker (<a href=https://mswjs.io/>mswjs</a>) creará un Service Worker en el navegador de turno para interceptar las peticiones y devolver respuestas pre-enlatadas.</p><p>Para ponerlo en marcha tenemos que seguir la entrada de <a href=https://mswjs.io/docs/getting-started>Getting started</a> y <a href=https://mswjs.io/docs/integrations/browser>Browser integration</a>.</p><p>Los pasos a seguir son:</p><ul><li><code>npm install msw@latest --save-dev</code></li><li><code>npx msw init .\public\ --save</code>, que creará el fichero <code>public\mockServiceWorker.js</code></li><li>Crear el fichero <a href=https://mswjs.io/docs/integrations/browser#setup>src\mocks\browser.ts</a></li><li>Crear el fichero <code>src\mocks\handlers.ts</code> donde escribiremos la lógica del mock.</li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>http</span><span class=p>,</span> <span class=nx>HttpResponse</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;msw&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>todos</span> <span class=kr>from</span> <span class=s1>&#39;../app/todos.json&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>environment</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;../environments/environment&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>apiUrl</span> <span class=o>=</span> <span class=nx>environment</span><span class=p>.</span><span class=nx>apiUrl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>handlers</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=nx>http</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>apiUrl</span><span class=si>}</span><span class=sb>/todos`</span><span class=p>,</span> <span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>params</span><span class=p>,</span> <span class=nx>cookies</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>        
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>todos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=c1>// https://mswjs.io/docs/recipes/query-parameters/#read-a-single-parameter
</span></span></span><span class=line><span class=cl><span class=c1></span>        <span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>title</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>description</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;description&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>description</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>description</span><span class=o>?</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>description</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>isCompleted</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;isCompleted&#39;</span><span class=p>)</span>        
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>isCompleted</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>isCompleted</span> <span class=o>===</span> <span class=p>(</span><span class=nx>isCompleted</span><span class=p>.</span><span class=nx>toString</span><span class=p>().</span><span class=nx>toLowerCase</span><span class=p>()</span> <span class=o>===</span> <span class=s1>&#39;true&#39;</span><span class=p>));</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>HttpResponse</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>filteredTodos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span></code></pre></div><p>Y por último <a href=https://mswjs.io/docs/integrations/browser#conditionally-enable-mocking>activar</a> <em>mswjs</em> en <code>main.ts</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>bootstrapApplication</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;@angular/platform-browser&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>appConfig</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./app/app.config&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>AppComponent</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./app/app.component&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>environment</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;./environments/environment&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>async</span> <span class=kd>function</span> <span class=nx>enableMocking() {</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=p>(</span><span class=nx>environment</span><span class=p>.</span><span class=nx>production</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=p>{</span> <span class=nx>worker</span> <span class=p>}</span> <span class=o>=</span> <span class=k>await</span> <span class=kr>import</span><span class=p>(</span><span class=s2>&#34;./mocks/browser&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=nx>worker</span><span class=p>.</span><span class=nx>start</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>enableMocking</span><span class=p>().</span><span class=nx>then</span><span class=p>(()</span> <span class=o>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>bootstrapApplication</span><span class=p>(</span><span class=nx>AppComponent</span><span class=p>,</span> <span class=nx>appConfig</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>.</span><span class=k>catch</span><span class=p>((</span><span class=nx>err</span><span class=p>)</span> <span class=o>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>err</span><span class=p>));</span>
</span></span><span class=line><span class=cl><span class=p>})</span>
</span></span></code></pre></div><p><img src=images/mswjs.png alt=mswjs></p><p><em>mswjs</em> mola mucho y es una opción. Sin embargo, reconozco que me sigue dando pereza escribir la API mockeada en <code>handlers.ts</code> y es ahí donde entra <a href=https://mockoon.com/>mockoon</a>.</p><p><em>mockoon</em> es una aplicación de escritorio (con su correspondiente <a href=https://mockoon.com/cli/>CLI</a> para poder instalarlo en un entorno de CI/CD) que nos permitirá a golpe de click, crear la API y soportar <a href=https://mockoon.com/features/>múltiples casos de uso</a>.</p><p>Hablo desde el <em>hype</em>, pero parece una herramienta muy <em>flexible y versatil</em>.</p><blockquote><p>Tiene un modelo de <a href=https://mockoon.com/pricing/>pricing</a> pero está relacionado con las características <em>cloud</em>. Como se dice en <a href=https://mockoon.com/features/>https://mockoon.com/features/</a>, <strong>Offline first: No account, no sign-up, no cloud deployment required</strong></p></blockquote><p>Finalmente, creamos la API (que es guardada en un fichero <code>.json</code>), arrancamos el servidor y ¡listo!.</p><p><img src=images/mockoon.png alt=mockoon></p><p>También puede ser que no queramos elegir entre <em>mswjs</em> y <em>mockoon</em>&mldr; y me parece bien, ¡yo tampoco!. Es perfectamente viable usar ambas herramientas para cubrir casi cualquier escenario.</p><blockquote><p>No te preocupes por que haya dos herramientas compitiendo por un mismo puerto, porque mockoon sí levanta un proceso en un puerto, pero <em>mswjs</em> no, simplemente intercepta peticiones y es un Service Worker.</p></blockquote><p>Para combinar ambas, sólo tenemos que usar <a href=https://mswjs.io/docs/api/bypass/>bypass</a> en <em>mswjs</em> en aquellas peticiones que no queramos interceptar y que terminarán llegando a su destino final, en nuestro caso <em>mockoon</em>.</p><p>Por ejemplo, aunque terminamos creando un endpoint <code>/todos</code> en <em>mockoon</em>, no tenía ninguna lógica de filtrado. Hagamos que esa lógica exista sólo para el campo <code>title</code> y hagámoslo en <em>mswjs</em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-typescript data-lang=typescript><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>bypass</span><span class=p>,</span> <span class=nx>http</span><span class=p>,</span> <span class=nx>HttpResponse</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;msw&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=nx>todos</span> <span class=kr>from</span> <span class=s1>&#39;../app/todos.json&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=kr>import</span> <span class=p>{</span> <span class=nx>environment</span> <span class=p>}</span> <span class=kr>from</span> <span class=s1>&#39;../environments/environment&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>apiUrl</span> <span class=o>=</span> <span class=nx>environment</span><span class=p>.</span><span class=nx>apiUrl</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>export</span> <span class=kr>const</span> <span class=nx>handlers</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=nx>http</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=sb>`</span><span class=si>${</span><span class=nx>apiUrl</span><span class=si>}</span><span class=sb>/todos`</span><span class=p>,</span> <span class=kr>async</span> <span class=p>({</span> <span class=nx>request</span><span class=p>,</span> <span class=nx>params</span><span class=p>,</span> <span class=nx>cookies</span> <span class=p>})</span> <span class=o>=&gt;</span> <span class=p>{</span>      
</span></span><span class=line><span class=cl>        <span class=kd>let</span> <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>todos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>url</span> <span class=o>=</span> <span class=k>new</span> <span class=nx>URL</span><span class=p>(</span><span class=nx>request</span><span class=p>.</span><span class=nx>url</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=kr>const</span> <span class=nx>title</span> <span class=o>=</span> <span class=nx>url</span><span class=p>.</span><span class=nx>searchParams</span><span class=p>.</span><span class=kr>get</span><span class=p>(</span><span class=s1>&#39;title&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=nx>title</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>          <span class=nx>filteredTodos</span> <span class=o>=</span> <span class=nx>filteredTodos</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>todo</span> <span class=o>=&gt;</span> <span class=nx>todo</span><span class=p>.</span><span class=nx>title</span><span class=p>.</span><span class=nx>includes</span><span class=p>(</span><span class=nx>title</span><span class=p>));</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=nx>HttpResponse</span><span class=p>.</span><span class=nx>json</span><span class=p>(</span><span class=nx>filteredTodos</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>        
</span></span><span class=line><span class=cl>                
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=k>await</span> <span class=nx>fetch</span><span class=p>(</span><span class=nx>bypass</span><span class=p>(</span><span class=k>new</span> <span class=nx>Request</span><span class=p>(</span><span class=nx>url</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=p>}),</span>
</span></span><span class=line><span class=cl><span class=p>];</span>
</span></span></code></pre></div><p>Ahora sí, <em>¡combo güeno!</em>.</p><p>Y como bola extra, si escribir modelos y servicios te da pereza, partiendo de una especificación OpenAPI, podemos usar herramientas para automatizar el proceso:</p><ul><li><a href=https://github.com/OpenAPITools/openapi-generator>https://github.com/OpenAPITools/openapi-generator</a></li><li><a href=https://github.com/cyclosproject/ng-openapi-gen>https://github.com/cyclosproject/ng-openapi-gen</a></li></ul><p>Incluso si tienes tiempo y ganas podrías hacer tu propia herramienta de generación de código. Aunque incompleto, <a href=https://gist.github.com/panicoenlaxbox/1f7af48d6ceac3c3c0197303a7b248e6>aquí</a> tienes un <em>gist</em> de algo sin terminar pero que bien podría acabarse y quedar aparente&mldr; aunque no obstante, con la llegada de la IA generativa, este tipo de contenido también se puede generar a golpe de <em>prompt</em>.</p><p>Un saludo!</p><div class=blog-tags><a href=https://panicoenlaxbox.com/tags/angular/>angular</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fpanicoenlaxbox.com%2fpost%2fmock-api%2f&amp;text=Mock%20API&amp;via=panicoenlaxbox" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fpanicoenlaxbox.com%2fpost%2fmock-api%2f&amp;title=Mock%20API" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li></ul></div></div></section></article><ul class="pager blog-pager"><li class=previous><a href=https://panicoenlaxbox.com/post/runnable-examples/ data-toggle=tooltip data-placement=top title="Runnable examples">&larr; Artículo anterior</a></li></ul><div class=disqus-comments><button id=show-comments class="btn btn-default" type=button>Mostrar <span class=disqus-comment-count data-disqus-url=https://panicoenlaxbox.com/post/mock-api>comentarios</span></button><div id=disqus_thread></div><script type=text/javascript>var disqus_config=function(){this.page.url="https://panicoenlaxbox.com/post/mock-api"}</script></div></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:panicoenlaxbox@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/panicoenlaxbox title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/panicoenlaxbox title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/sergio-le%c3%b3n-gonz%c3%a1lez-49412642 title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">Sergio León
&nbsp;&bull;&nbsp;&copy;
2025
&nbsp;&bull;&nbsp;
<a href=https://panicoenlaxbox.com>Programación desordenada</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.115.2</a> alimentada &nbsp;&bull;&nbsp; Tema <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adaptado de <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script>
<script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://panicoenlaxbox.com/js/main.js></script>
<script src=https://panicoenlaxbox.com/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script>renderMathInElement(document.body)</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://panicoenlaxbox.com/js/load-photoswipe.js></script>
<script type=text/javascript>$(function(){$("#show-comments").on("click",function(){var e="panicoenlaxbox-github-io";(function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)})(),$(this).hide()})})</script><script id=dsq-count-scr src=//panicoenlaxbox-github-io.disqus.com/count.js async></script></body></html>