<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=es lang=es><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.83.1"><title>Hugo en GitHub &#183; Programación desordenada</title><meta name=description content><meta itemprop=name content="Hugo en GitHub"><meta itemprop=description content="Llevaba tiempo queriendo migrar mi blog de google a otra plataforma y Hugo y GitHub me lo han puesto muy fácil."><meta itemprop=datePublished content="2021-06-06T12:04:30+02:00"><meta itemprop=dateModified content="2021-06-06T12:04:30+02:00"><meta itemprop=wordCount content="855"><meta itemprop=image content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta itemprop=keywords content="hugo,github,"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta name=twitter:title content="Hugo en GitHub"><meta name=twitter:description content="Llevaba tiempo queriendo migrar mi blog de google a otra plataforma y Hugo y GitHub me lo han puesto muy fácil."><meta property="og:title" content="Hugo en GitHub"><meta property="og:description" content="Llevaba tiempo queriendo migrar mi blog de google a otra plataforma y Hugo y GitHub me lo han puesto muy fácil."><meta property="og:type" content="article"><meta property="og:url" content="https://panicoenlaxbox.com/post/hugo-github/"><meta property="og:image" content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta property="article:section" content="post"><meta property="article:published_time" content="2021-06-06T12:04:30+02:00"><meta property="article:modified_time" content="2021-06-06T12:04:30+02:00"><meta property="og:site_name" content="Programación desordenada"><script type=application/ld+json>{"@context":"https://schema.org","@graph":[{"@type":"Person","@id":"https://panicoenlaxbox.com#author","name":null,"image":{"@type":"ImageObject","url":"https://panicoenlaxbox.com/img/avatar-icon.png"},"description":"Un poquito de todo"},{"@type":"WebSite","@id":"https://panicoenlaxbox.com#website","url":"https://panicoenlaxbox.com","name":"Programación desordenada","description":"Un poquito de todo","publisher":{"@id":"https://panicoenlaxbox.com#author"},"inLanguage":"es"},{"@type":"ImageObject","url":"https://panicoenlaxbox.com/img/avatar-icon.png","caption":"Programación desordenada"},{"@type":"WebPage","@id":"https://panicoenlaxbox.com/post/hugo-github/#webpage","url":"https://panicoenlaxbox.com/post/hugo-github/","name":"Hugo en GitHub","isPartOf":{"@id":"https://panicoenlaxbox.com#website"},"about":{"@id":"https://panicoenlaxbox.com#author"},"datePublished":"2021-06-06T12:04:30+02:00","dateModified":"2021-06-06T12:04:30+02:00","description":"\u003cp\u003eLlevaba tiempo queriendo migrar mi blog de google a otra plataforma y \u003ca href=\"https://gohugo.io/\"\u003eHugo\u003c/a\u003e y \u003ca href=\"https://github.com/\"\u003eGitHub\u003c/a\u003e me lo han puesto muy fácil.\u003c/p\u003e","inLanguage":"es","potentialAction":[{"@type":"ReadAction","target":["https://panicoenlaxbox.com/post/hugo-github/"]}]},{"@type":"Article","isPartOf":{"@id":"https://panicoenlaxbox.com/post/hugo-github/#webpage"},"mainEntityOfPage":{"@id":"https://panicoenlaxbox.com/post/hugo-github/#webpage"},"headline":"Hugo en GitHub","datePublished":"2021-06-06T12:04:30+02:00","dateModified":"2021-06-06T12:04:30+02:00","publisher":{"@id":"https://panicoenlaxbox.com#author"},"keywords":["hugo","github"],"articleSection":["blogging"],"inLanguage":"es","author":{"@type":"Person","name":null},"potentialAction":[{"@type":"CommentAction","name":"Comment","target":["https://panicoenlaxbox.com/post/hugo-github/#comments"]}]}]}</script><link type=text/css rel=stylesheet href=/css/print.css media=print><link type=text/css rel=stylesheet href=/css/poole.css><link type=text/css rel=stylesheet href=/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin=anonymous><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png></head><body><aside class=sidebar><div class=container><div class=sidebar-about><div class=author-image><a href=https://panicoenlaxbox.com><img src=/img/avatar-icon.png class="img-circle img-headshot center" alt="Profile Picture"></a></div><h1>Programación desordenada</h1><p class=lead>Un poquito de todo</p></div><nav><ul class=sidebar-nav><li><a href=https://panicoenlaxbox.com>Home</a></li><li><a href=/page/about/>About</a></li><li><a href=/post/>Posts</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li></ul></nav><section class=social-icons><a href=https://linkedin.com/in/sergio-le%c3%b3n-gonz%c3%a1lez-49412642 rel=me title=Linkedin target=_blank><i class="fab fa-linkedin" aria-hidden=true></i></a>
<a href=https://github.com/panicoenlaxbox rel=me title=GitHub target=_blank><i class="fab fa-github" aria-hidden=true></i></a>
<a href=https://twitter.com/panicoenlaxbox/ rel=me title=Twitter target=_blank><i class="fab fa-twitter" aria-hidden=true></i></a></section></div></aside><main class="content container"><div class=post><h1 class=title>Hugo en GitHub</h1><div class=post-date><time datetime=2021-06-06T12:04:30+0200>Jun 6, 2021</time> <span class=readtime>&#183; 5 min read</span></div><div><p>Llevaba tiempo queriendo migrar mi blog de google a otra plataforma y <a href=https://gohugo.io/>Hugo</a> y <a href=https://github.com/>GitHub</a> me lo han puesto muy fácil.</p><p>Si a esto le sumamos <a href=https://typora.io/>Typora</a> para escribir el post, parece factible que escribir un post no sea un dolor.</p><p>Instalar Hugo es tan sencillo como <a href=https://gohugo.io/getting-started/installing/#binary-cross-platform>descargar</a> un fichero ejecutable.</p><p>Donde he invertido más tiempo ha sido en buscar y encontrar una <a href=https://themes.gohugo.io/>plantilla</a>. En mi caso he optado por <a href=https://themes.gohugo.io/beautifulhugo/>Beautiful Hugo</a>.</p><p>Con todo listo, crear un sitio de Hugo conlleva una sola instrucción:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>hugo new site panicoenlaxbox-blog
</code></pre></div><p>Para trabajar con la plantilla, puedes o bien copiar los ficheros a tu repositorio, o bien añadir un submódulo a tu repositorio que apunte al repositorio de la plantilla. Con la segunda opción, siempre tendrás la puerta abierta a actualizar el submódulo e incorporar nuevos cambios del repositorio remoto de una forma más sencilla.</p><p>Si optas por por copiar los ficheros, un script como el siguiente debería bastar (o simplemente descargar manualmente el repositorio y copiarlo a mano).</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>$url = <span style=color:#e6db74>&#34;https://github.com/halogenica/beautifulhugo/archive/refs/heads/master.zip&#34;</span>
Invoke-WebRequest -Uri $url -OutFile .\themes\beautifulhugo.zip
Expand-Archive .\themes\beautifulhugo.zip -DestinationPath .\themes\
Rename-Item -Path .\themes\beautifulhugo-master\ -NewName beautifulhugo
Remove-Item .\themes\beautifulhugo.zip
Copy-Item .\themes\beautifulhugo\exampleSite\config.toml .\config.toml
</code></pre></div><p>Dicho esto, yo he optado por crear un submódulo, así que después de haber creado el sitio, he tenido que ejecutar:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>git init
git submodule add https<span style=color:#960050;background-color:#1e0010>:</span>//github.com/halogenica/beautifulhugo.git .\themes\beautifulhugo
</code></pre></div><p>Si más adelante tienes que volver a clonar tu repositorio, usa la siguiente instrucción para clonar también el submódulo:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>git clone --recurse-submodules &lt;your_repository&gt;
</code></pre></div><p>Para una primera prueba en local y confirmar que está todo funcionando:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Copy-Item .\themes\beautifulhugo\exampleSite\config.toml .\config.toml
hugo new post/my-first-post.md
hugo new page/about.md
hugo server -D
</code></pre></div><p>Un paso obligado es modificar el fichero <code>config.toml</code> que hemos copiado de la plantilla, los cambios más relevantes son:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=color:#a6e22e>baseurl</span> = <span style=color:#e6db74>&#34;https://panicoenlaxbox.github.io&#34;</span>
<span style=color:#a6e22e>DefaultContentLanguage</span> = <span style=color:#e6db74>&#34;es&#34;</span>
<span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#34;Programación desordenada&#34;</span>
<span style=color:#a6e22e>disqusShortname</span> = ...
<span style=color:#a6e22e>googleAnalytics</span> = ...
[<span style=color:#a6e22e>Params</span>]
  <span style=color:#a6e22e>subtitle</span> = <span style=color:#e6db74>&#34;Un poquito de todo&#34;</span>
  <span style=color:#a6e22e>readingTime</span> = <span style=color:#66d9ef>false</span>
  <span style=color:#a6e22e>wordCount</span> = <span style=color:#66d9ef>false</span>
  <span style=color:#a6e22e>hideAuthor</span> = <span style=color:#66d9ef>true</span>
[<span style=color:#a6e22e>Author</span>]
  ...
<span style=color:#75715e># [[menu.main]]</span>
<span style=color:#75715e>#     identifier = &#34;samples&#34;</span>
<span style=color:#75715e>#     ...</span>
<span style=color:#75715e># </span>
<span style=color:#75715e># [[menu.main]]</span>
<span style=color:#75715e>#     parent = &#34;samples&#34;</span>
<span style=color:#75715e>#     ...</span>
<span style=color:#75715e># </span>
<span style=color:#75715e># [[menu.main]]</span>
<span style=color:#75715e>#     parent = &#34;samples&#34;</span>
<span style=color:#75715e>#     name = &#34;Math Sample&#34;</span>
<span style=color:#75715e>#     ...</span>
<span style=color:#75715e># </span>
<span style=color:#75715e># [[menu.main]]</span>
<span style=color:#75715e>#     parent = &#34;samples&#34;</span>
<span style=color:#75715e>#     name = &#34;Code Sample&#34;</span>
<span style=color:#75715e>#     ...</span>
</code></pre></div><p>Como verás, la plantilla seleccionada viene de serie con soporte para <a href=https://github.com/halogenica/beautifulhugo#disqus-support>Disqus</a> y <a href=https://github.com/halogenica/beautifulhugo#google-analytics>Google Analytics</a>.</p><p>Para modificar la plantilla, podemos hacer una copia en nuestro proyecto de los ficheros que queremos sobrescribir, y Hugo lo tendrá en cuenta para hacer que prevalezcan sobre los que se encuentre en la plantilla. Por ejemplo, yo he querido editar el fichero <code>share-links.html</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>New-Item .\layouts\partials -ItemType Directory
Copy-Item .\themes\beautifulhugo\layouts\partials\share-links.html .\layouts\partials\share-links.html
<span style=color:#75715e># Ahora puedes modificar tu fichero share-links.html y prevalecerá sobre el que está en la plantilla</span>
</code></pre></div><p>Para la imagen principal del blog, deberemos crear el directorio <code>img</code> dentro <code>static</code> y poner allí los ficheros <code>avatar-icon.png</code> y <code>favicon.ico</code>.</p><p>Si queremos probar nuestro blog en local (y además de hacerlo con <code>hugo server -D</code>) podemos ejecutar <code>hugo --minify</code> (que será lo que ejecutemos después en un workflow en GitHub). Este comando nos generará una carpeta <code>public/</code> que es ya nuestro blog listo para publicar. Por eso, es buena idea crear un fichero <code>.gitignore</code> y excluir esta carpeta del control de código fuente.</p><p>Ya con nuestro blob creado y funcionando es hora de publicarlo en GitHub para que sea accesible de forma pública.</p><p>Lo que tendremos que hacer es crear 2 repositorios. El primero será privado (aunque podría ser público) y contendrá el repositorio de Hugo. Puede llamarse de cualquier forma, yo he optado por <code>panicoenlaxbox-blog</code>. Por el contrario el segundo tiene que ser público y obligatoriamente ha de llamarse <code>&lt;tu_nombre_de_usuario_en_github>.github.io</code>. Será en este segundo repositorio donde publiquemos de forma automática la carpeta <code>public/</code>. Por último, hay que crear un token de GitHub con el permiso <code>public_repo</code> y crear un secreto llamado <code>PERSONAL_TOKEN</code> en el primer repositorio.</p><p><img src=images/token_permissions.png alt=token_permission></p><p>Ahora crearemos en el primer repositorio un workflow <code>.github\workflows\gh-pages.yml</code> que publicará nuestro blog en el repositorio público.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#75715e># https://gohugo.io/hosting-and-deployment/hosting-on-github/</span>
<span style=color:#f92672>name</span>: <span style=color:#ae81ff>github pages</span>

<span style=color:#f92672>on</span>:
  <span style=color:#f92672>workflow_dispatch</span>:
  <span style=color:#f92672>push</span>:
    <span style=color:#f92672>branches</span>:
      - <span style=color:#ae81ff>main </span> <span style=color:#75715e># Set a branch to deploy</span>
  <span style=color:#f92672>pull_request</span>:

<span style=color:#f92672>jobs</span>:
  <span style=color:#f92672>deploy</span>:
    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-20.04</span>
    <span style=color:#f92672>steps</span>:
      - <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>submodules</span>: <span style=color:#66d9ef>true</span>  <span style=color:#75715e># Fetch Hugo themes (true OR recursive)</span>
          <span style=color:#f92672>fetch-depth</span>: <span style=color:#ae81ff>0</span>    <span style=color:#75715e># Fetch all history for .GitInfo and .Lastmod</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Setup Hugo</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-hugo@v2</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>hugo-version</span>: <span style=color:#e6db74>&#39;latest&#39;</span>
          <span style=color:#75715e># extended: true</span>

      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Build</span>
        <span style=color:#f92672>run</span>: <span style=color:#ae81ff>hugo --minify</span>

      <span style=color:#75715e># https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-set-personal-access-token-personal_token</span>
      <span style=color:#75715e># https://github.com/peaceiris/actions-gh-pages#%EF%B8%8F-deploy-to-external-repository-external_repository</span>
      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy</span>
        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>peaceiris/actions-gh-pages@v3</span>
        <span style=color:#f92672>if</span>: <span style=color:#ae81ff>github.ref == &#39;refs/heads/main&#39;</span>
        <span style=color:#f92672>with</span>:
          <span style=color:#f92672>personal_token</span>: <span style=color:#ae81ff>${{ secrets.PERSONAL_TOKEN }}</span>
          <span style=color:#f92672>publish_dir</span>: <span style=color:#ae81ff>./public</span>
          <span style=color:#f92672>external_repository</span>: <span style=color:#ae81ff>panicoenlaxbox/panicoenlaxbox.github.io</span>
          <span style=color:#f92672>publish_branch</span>: <span style=color:#ae81ff>main        </span>
</code></pre></div><p>Y con esto ya tenemos publicado nuestro blog.</p><p>Si además queremos agregar un dominio personalizado, y aunque esté explicado <a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#about-custom-domain-configuration>aquí</a>, yo igualmente te dejo un par de imágenes que muestran la configuración que, en mi caso, funcionó después de un par de intentos fallidos.</p><p><img src=images/pages.png alt=pages></p><p><img src=images/dns.png alt=dns></p><p>Después de esto tendrás que actualizar el fichero <code>config.toml</code> con tu nueva <code>baseurl</code>.</p><p>Además, al crear el dominio personalizado en GitHub, se añadió un commit automático al repositorio público con un fichero <code>CNAME</code> cuyo contenido es simplemente el valor de tu custom domain. Como no queremos perderlo cada vez que publiquemos, lo más sencillo es generarlo desde el workflow después del paso <code>Build</code>.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>CNAME</span>
        <span style=color:#f92672>run</span>: 
          <span style=color:#ae81ff>echo www.panicoenlaxbox.com &gt;&gt; public/CNAME</span>
</code></pre></div><p>Ahora sí, ¡reto conseguido!.</p></div><div><ul class=tags><li><a href=https://panicoenlaxbox.com/tags/hugo/ class=tag-link>hugo</a></li><li><a href=https://panicoenlaxbox.com/tags/github/ class=tag-link>github</a></li></ul></div><div class=share-buttons><a class=twitter-share-button href=# title="Share on Twitter" data-url=https://panicoenlaxbox.com/post/hugo-github/ data-text="Hugo en GitHub"><i class="fab fa-twitter"></i></a>
<a class=linkedin-share-button href=# title="Share on LinkedIn" data-url=https://panicoenlaxbox.com/post/hugo-github/ data-text="Hugo en GitHub"><i class="fab fa-linkedin-in"></i></a></div><div class=comments><h2>Comments</h2><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//panicoenlaxbox-github-io.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></main><footer><div><p>&copy; Sergio León 2021
&#183; <a href=https://creativecommons.org/licenses/by-sa/4.0 target=_blank>CC BY-SA 4.0</a>
&#183; Build with <a href=https://gohugo.io/ target=_blank>Hugo</a> & <a href=https://themes.gohugo.io/soho/ target=_blank>Soho</a> theme</p></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0=" crossorigin=anonymous></script><script src=/js/jquery.min.js></script><script src=/js/soho.js></script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-57023975-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>