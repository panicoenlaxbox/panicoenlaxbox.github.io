<!doctype html><html lang=es itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>Organización de un proyecto de Python - Programación desordenada</title><meta name=description content="Paquetes, módulos, __init__.py, __main__.py e imports absolutos y relativos"><meta name=author content="Sergio León"><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","name":"Programación desordenada","url":"https:\/\/panicoenlaxbox.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Organization","name":"","url":"https:\/\/panicoenlaxbox.com"}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https:\/\/panicoenlaxbox.com","name":"home"}},{"@type":"ListItem","position":3,"item":{"@id":"https:\/\/panicoenlaxbox.com\/post\/organizacion-proyecto-python\/","name":"Organización de un proyecto de python"}}]}</script><script type=application/ld+json>{"@context":"http://schema.org","@type":"Article","author":{"name":"Sergio León"},"headline":"Organización de un proyecto de Python","description":"Aunque es perfectamente válido incluir todo nuestro código en un sólo fichero .py, tarde o temprano cualquier proyecto nos obligará a pensar en cuál sería la estructura ideal de paquetes y módulos.\n","inLanguage":"es","wordCount":2609,"datePublished":"2022-04-04T10:20:16","dateModified":"2022-04-04T10:20:16","image":"https:\/\/panicoenlaxbox.com\/img\/avatar-icon.png","keywords":["python, pycharm"],"mainEntityOfPage":"https:\/\/panicoenlaxbox.com\/post\/organizacion-proyecto-python\/","publisher":{"@type":"Organization","name":"https:\/\/panicoenlaxbox.com","logo":{"@type":"ImageObject","url":"https:\/\/panicoenlaxbox.com\/img\/avatar-icon.png","height":60,"width":60}}}</script><meta property="og:title" content="Organización de un proyecto de Python"><meta property="og:description" content="Paquetes, módulos, __init__.py, __main__.py e imports absolutos y relativos"><meta property="og:image" content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta property="og:url" content="https://panicoenlaxbox.com/post/organizacion-proyecto-python/"><meta property="og:type" content="website"><meta property="og:site_name" content="Programación desordenada"><meta name=twitter:title content="Organización de un proyecto de Python"><meta name=twitter:description content="Paquetes, módulos, __init__.py, __main__.py e imports absolutos y relativos"><meta name=twitter:image content="https://panicoenlaxbox.com/img/avatar-icon.png"><meta name=twitter:card content="summary"><meta name=twitter:site content="@panicoenlaxbox"><meta name=twitter:creator content="@panicoenlaxbox"><link href=https://panicoenlaxbox.com/img/favicon.ico rel=icon type=image/x-icon><meta name=generator content="Hugo 0.110.0"><link rel=alternate href=https://panicoenlaxbox.com/index.xml type=application/rss+xml title="Programación desordenada"><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css integrity=sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y crossorigin=anonymous><link rel=stylesheet href=https://use.fontawesome.com/releases/v5.5.0/css/all.css integrity=sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU crossorigin=anonymous><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css integrity=sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u crossorigin=anonymous><link rel=stylesheet href=https://panicoenlaxbox.com/css/main.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic"><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"><link rel=stylesheet href=https://panicoenlaxbox.com/css/highlight.min.css><link rel=stylesheet href=https://panicoenlaxbox.com/css/codeblock.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css integrity=sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css integrity=sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R crossorigin=anonymous><style>.intro-header .archive-heading{text-align:center}.intro-header .archive-heading h1{margin-top:0;font-size:50px}@media only screen and (min-width:768px){.intro-header .archive-heading h1{font-size:80px}}.post-entry a{color:#008aff}body.dark-mode,body.dark-mode main *{background:#2d2d2d;color:#f5f5f5}body.dark-mode .post-title,body.dark-mode .post-subtitle{color:#f5f5f5}body.dark-mode .post-entry a{color:#008aff}body.dark-mode table tr th,body.dark-mode table tr td{color:#333}blockquote{margin:20px}table{margin-top:10px}</style><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-57023975-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class=container-fluid><div class=navbar-header><button type=button class=navbar-toggle data-toggle=collapse data-target=#main-navbar>
<span class=sr-only>Conmuta navegación</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=https://panicoenlaxbox.com>Programación desordenada</a></div><div class="collapse navbar-collapse" id=main-navbar><ul class="nav navbar-nav navbar-right"><li><a title=Tags href=/tags>Tags</a></li><li><a title=Archive href=/archive>Archive</a></li><li><a title=About href=/about>About</a></li></ul></div><div class=avatar-container><div class=avatar-img-border><a title="Programación desordenada" href=https://panicoenlaxbox.com><img class=avatar-img src=https://panicoenlaxbox.com/img/avatar-icon.png alt="Programación desordenada"></a></div></div></div></nav><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header class=header-section><div class="intro-header no-img"><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><h1>Organización de un proyecto de Python</h1><h2 class=post-subheading>Paquetes, módulos, __init__.py, __main__.py e imports absolutos y relativos</h2><span class=post-meta><i class="fas fa-calendar"></i>&nbsp;Publicado el April 4, 2022</span></div></div></div></div></div></header><div class=js-toggle-wrapper><div class=js-toggle><div class=js-toggle-track><div class=js-toggle-track-check><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=16 height=16></div><div class=js-toggle-track-x><img src="data:image/png;base64,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" role=presentation style=pointer-events:none width=16 height=16></div></div><div class=js-toggle-thumb></div><input class=js-toggle-screenreader-only type=checkbox aria-label="Switch between Dark and Light mode"></div></div><style>.js-toggle-wrapper{display:table;margin:0 auto}.js-toggle{touch-action:pan-x;display:inline-block;position:relative;cursor:pointer;background-color:transparent;border:0;padding:0;-webkit-touch-callout:none;user-select:none;-webkit-tap-highlight-color:transparent;-webkit-tap-highlight-color:transparent}.js-toggle-screenreader-only{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.js-toggle-track{width:50px;height:24px;padding:0;border-radius:30px;background-color:#0f1114;transition:all .2s ease}.js-toggle-track-check{position:absolute;width:17px;height:17px;left:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:0;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-check{opacity:1;transition:opacity .25s ease}.js-toggle-track-x{position:absolute;width:17px;height:17px;right:5px;top:0;bottom:0;margin-top:auto;margin-bottom:auto;line-height:0;opacity:1;transition:opacity .25s ease}.js-toggle--checked .js-toggle-track-x{opacity:0}.js-toggle-thumb{position:absolute;top:1px;left:1px;width:22px;height:22px;border-radius:50%;background-color:#fafafa;box-sizing:border-box;transition:all .5s cubic-bezier(.23,1,.32,1)0ms;transform:translateX(0)}.js-toggle--checked .js-toggle-thumb{transform:translateX(26px);border-color:#19ab27}.js-toggle--focus .js-toggle-thumb{box-shadow:0 0 2px 3px #ffa7c4}.js-toggle:active .js-toggle-thumb{box-shadow:0 0 5px 5px #ffa7c4}</style><script>var body=document.body,switcher=document.getElementsByClassName("js-toggle")[0];switcher.addEventListener("click",function(){this.classList.toggle("js-toggle--checked"),this.classList.add("js-toggle--focus"),this.classList.contains("js-toggle--checked")?(body.classList.add("dark-mode"),localStorage.setItem("darkMode","true")):(body.classList.remove("dark-mode"),setTimeout(function(){localStorage.removeItem("darkMode")},100))}),localStorage.getItem("darkMode")&&(switcher.classList.add("js-toggle--checked"),body.classList.add("dark-mode"))</script><div class=container role=main><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><article role=main class=blog-post><p>Aunque es perfectamente válido incluir todo nuestro código en un sólo fichero <code>.py</code>, tarde o temprano cualquier proyecto nos obligará a pensar en cuál sería la estructura ideal de paquetes y módulos.</p><p>Una de las muchas fortalezas de Python (y por lo que se percibe quizás como un lenguaje con una curva de aprendizaje bastante asequible) es que resulta muy sencillo crear un fichero <code>.py</code>, escribir algo de código y ejecutarlo con una simple instrucción como <code>python fichero.py</code>. Sin embargo, esta suerte de &ldquo;scripting&rdquo; no escala muy bien para abordar un proyecto completo con garantías.</p><p>Además, y ahondando en ese concepto de &ldquo;scripting&rdquo; que Python nos ofrece, no tenemos ni porqué programar bajo el paradigma de la programación orientada a objetos. Es cierto que en Python todo es un objeto, desde los tipos primitivos (<code>str</code>, <code>int</code>, <code>bool</code>, etc) hasta los tipos built-in (<code>list</code>, <code>dict</code>, <code>tuple</code>, <code>set</code>) pasando por una función o un módulo. Sin embargo, es perfectamente válido escribir un programa en Python sin usar la palabra reservada <code>class</code>, esto es, sin ni siquiera saber que es una clase.</p><blockquote><p>Python es <em>object-based</em> en vez de <em>object-oriented</em>. <a href=https://www.oreilly.com/library/view/head-first-python/9781491919521/>Head First Python, 2nd Edition</a></p></blockquote><p>El scripting por sí mismo no es malo. Hay que pensar en el amplio uso que se da a Python: desde un script para automatizar una tarea de IT, pasando por un notebook interactivo para explorar y analizar datos, hasta complejas aplicaciones web que requieren una gran cantidad de funcionalidad. En todas ellas, con o sin OOP, Python sirvió y cumplió, nada que objetar.</p><p>No obstante, pensando más en aplicaciones de cierto calado, el propósito de este post es explicar las distintas opciones que tenemos a la hora de organizar la estructura de nuestro proyecto.</p><p>Las reglas iniciales del juego son:</p><ul><li>Python reconoce un directorio como un paquete si tiene dentro un fichero <code>__init__.py</code>.<ul><li>No es necesario que este fichero tenga ningún contenido, con que esté el fichero es suficiente.</li></ul></li><li>Un paquete tendrá normalmente módulos pero también puede contener otros paquetes (que bien podríamos denominar <em>subpaquetes</em>).</li><li>Un módulo es un fichero <code>.py</code> que contiene código (funciones, clases, etc.)</li></ul><blockquote><p>Si creamos un directorio y no añadimos un fichero <code>__init__.py</code>, para Python sería un <em>namespace package</em> que, aunque tiene su <a href=https://stackoverflow.com/a/48804718>razón de ser</a>, es bastante excepcional. Con seguridad, el 99.9% de las veces crear un fichero <code>__init__.py</code> es la decisión correcta.</p></blockquote><p>Normalmente, el fichero <code>__init__.py</code> estará vacío, pero es cierto que tiene un propósito mayor y es permitir incluir código de inicialización del paquete.</p><p>Veamos primero un ejemplo con ficheros <code>__init__.py</code> vacíos (y donde <code>main.py</code> está fuera del paquete para facilitar el resto de los ejemplos, aunque en la estructura final propuesta estará dentro de <code>a_package</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>project\
</span></span><span class=line><span class=cl>    a_package\
</span></span><span class=line><span class=cl>        __init__.py
</span></span><span class=line><span class=cl>        a_module.py
</span></span><span class=line><span class=cl>        a_subpackage\
</span></span><span class=line><span class=cl>            __init__.py
</span></span><span class=line><span class=cl>            another_module.py
</span></span><span class=line><span class=cl>    main.py
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_module</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_subpackage.another_module</span>
</span></span></code></pre></div><p>Con independencia de que resulte más o menos <em>verbose</em> la forma escogida de importar los módulos (la instrucción <code>import</code> admite múltiples variaciones), lo que queda claro con este ejemplo es que creamos paquetes y módulos buscando organizar nuestro <em>&ldquo;vasto&rdquo;</em> código bajo la premisa de la <a href=https://es.wikipedia.org/wiki/Modularidad_(inform%C3%A1tica)>modularidad</a>.</p><p>Respecto a <code>main.py</code>, cabe mencionar que no tiene un significado especial para Python. Podríamos haberlo llamado <code>foo.py</code> y todo seguiría igual. La confunsión suele venir porque si el fichero se llamara <code>__main__.py</code> (se parece mucho pero no es lo mismo) sí que es algo que Python entiende como un caso especial. Hablaremos de él más adelante.</p><p>Como dijimos antes, <code>__init__.py</code> puede incluir código de inicialización del paquete. Por ejemplo, nos permitiría ejecutar código la primera vez que se importe algo del paquete o también podría servir para exponer de forma ordenada la API interna del paquete a un consumidor.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># a_package\__init__.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_module</span> <span class=k>as</span> <span class=nn>my_first_module</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_subpackage.another_module</span> <span class=k>as</span> <span class=nn>my_second_module</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;a_package was loaded&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package</span>  <span class=c1># import the package</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>a_package</span><span class=o>.</span><span class=n>my_first_module</span><span class=o>.</span><span class=n>a_function</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>a_package</span><span class=o>.</span><span class=n>my_second_module</span><span class=o>.</span><span class=n>another_function</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># a_package was loaded</span>
</span></span><span class=line><span class=cl><span class=c1># a_function in a_package/a_module</span>
</span></span><span class=line><span class=cl><span class=c1># another_function in a_package.a_subpackage.another_module</span>
</span></span></code></pre></div><p>Algo importante que entra en juego cuando usamos <code>__init__.py</code> es la variable <code>__all__</code>. Tiene un caso de uso muy concreto y es cuando se usa la siguiente instrucción <code>from a_package import *</code>. Por defecto, y asumiendo que no hay que usar * al importar (no lo digo yo, lo dice <a href=https://peps.python.org/pep-0008/#imports>PEP 8</a>, <em>Wildcard imports (from &lt;module> import *) should be avoided&mldr;</em>), <code>__all__</code> nos permite definir qué se exportará y qué no (en vez de todo sin filtro alguno). Si no usamos <code>__all__</code>, se exportará todo el espacio de nombres disponible en <code>__init__.py</code> (excepto lo que comience por guion bajo que por convención se considera privado).</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># a_package\__init__.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_module</span> <span class=k>as</span> <span class=nn>my_first_module</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_subpackage.another_module</span> <span class=k>as</span> <span class=nn>my_second_module</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>__all__</span> <span class=o>=</span> <span class=p>[</span><span class=s1>&#39;my_first_module&#39;</span><span class=p>]</span>  <span class=c1># We only export my_first_module</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>a_package</span> <span class=kn>import</span> <span class=o>*</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>my_first_module</span><span class=o>.</span><span class=n>a_function</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=n>my_second_module</span><span class=o>.</span><span class=n>another_function</span><span class=p>()</span>  <span class=c1># It will fail because it&#39;s not in __all__</span>
</span></span><span class=line><span class=cl><span class=c1># a_function() in a_package/a_module</span>
</span></span><span class=line><span class=cl><span class=c1># Traceback (most recent call last):</span>
</span></span><span class=line><span class=cl><span class=c1>#   File &#34;C:\Users\sergio.leon\PycharmProjects\PythonProject1\main.py&#34;, line 4, in &lt;module&gt;</span>
</span></span><span class=line><span class=cl><span class=c1>#     my_second_module.another_function()</span>
</span></span><span class=line><span class=cl><span class=c1># NameError: name &#39;my_second_module&#39; is not defined</span>
</span></span></code></pre></div><p>Como verás, <code>__init__.py</code> da mucho juego y ofrece un buen abanico de posibilidades. Mi recomendación es que te leas los siguientes posts donde se explica mucho más en detalle como usar <code>__init__.py</code> y darle un sentido.</p><ul><li><a href=https://towardsdatascience.com/whats-init-for-me-d70a312da583>What’s __init__ for me?</a></li><li><a href=https://pcarleton.com/2016/09/06/python-init/>What is __init__.py? and what should I put in it?</a></li></ul><p>Aunque antes se mencionó de pasada, en Python no existe la visibilidad como una regla estricta. Es decir, no hay una palabra clave <code>private</code> ni ninguna otra similiar. En Python todo es público. Sin embargo, la convención es que todo lo que comience por un guion bajo (<code>_</code>) es privado. Pero es eso, una convención, nadie te obliga a usarlo&mldr; aunque todo el mundo la sigue.</p><p>Si usamos clases, un guion bajo sería el equivalente a <code>protected</code> en el contexto de una clase hija o derivada, puesto que la misma puede sobrescribir el método heredado. Si en una subclase no queremos dar esa posibilidad, con dos guiones bajos (<code>__</code>) y con un poco de magia a cargo de <a href=https://www.geeksforgeeks.org/name-mangling-in-python/>name mangling</a> Python convertirá nuestro método a <code>_ClassName__Attribute</code> donde ya sí, sería mucho más difícil (aunque no imposible) sobrescribir el método.</p><p>Como ves, el guion bajo es algo muy importante en Python, de nuevo en el <a href=https://peps.python.org/pep-0008/#descriptive-naming-styles>PEP 8</a> nos informan sobre ello. Sinceramente, leer PEPs no es algo que uno haga de buena mañana, pero si sólo pudieses leer uno, PEP 8 es tu PEP.</p><table><thead><tr><th>Posición</th><th>Ejemplo</th><th>Uso</th></tr></thead><tbody><tr><td>_single_leading_underscore</td><td>_foo</td><td>Uso interno, privado.</td></tr><tr><td>single_trailing_underscore_</td><td>foo_</td><td>Evitar conflictos con palabras reservadas del lenguaje, built-in o para evitar ocultar una variable de un ámbito superior. Por ejemplo, <code>class_</code>, <code>len_</code>, etc</td></tr><tr><td>__double_leading_underscore</td><td>__foo</td><td>Name mangling. private en clase derivada.</td></tr><tr><td>__double_leading_and_trailing_underscore__</td><td>__foo__</td><td>Un método &ldquo;mágico&rdquo;.</td></tr><tr><td>Single underscore</td><td>_</td><td>Un nombre de usar y tirar para una variable. <code>def foo(_): return True</code></td></tr></tbody></table><blockquote><p>Personalmente, &ldquo;mágico&rdquo; no me gusta (y no soy el único) porque parece algo sólo para expertos o gurús. Me gusta más dunder (que es una forma sencilla de pronunciar double underscore). Por ejemplo, me expresaría como &ldquo;el método dunder foo&rdquo;.</p></blockquote><p>La convención <em>_single_leading_underscore</em> se usa incluso en el nombre de los módulos. Por ejemplo <code>_foo.py</code> sería un módulo privado. La propia <a href=https://github.com/python/cpython/tree/main/Lib>Standard Library</a> lo usa. En mi opinión, no creo haya un consenso fuerte en el uso de esta práctica.</p><p>De vuelta con <code>__main__.py</code>, creo que para entenderlo bien sería útil hablar primero de ese &ldquo;comúnmente usado&rdquo; snippet de código que aparece en cada <code>main.py</code> que se precie:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># Your program goes here</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><p>Lo importante es saber que un módulo puede ser ejecutado o cargado. Si es ejecutado con <code>python main.py</code> o bien cargado con <code>python -m main</code> entonces <code>__name__</code> valdrá el literal <code>"__main__"</code>, es lo que llaman <a href=https://docs.python.org/3/library/__main__.html#what-is-the-top-level-code-environment>top-level code environment</a>. Por otro lado, si se carga como un módulo a través de un <code>import</code>valdrá su nombre de módulo precedido de los paquetes en los que esté incluido separados por punto. Por ejemplo, para <code>a_package/a_module.py</code>, <code>__name__</code> valdría <code>"a_package.a_module"</code>.</p><p>Con esta información, lo que realmente estamos diciendo es lo siguiente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Only run the main function if this module is being run directly with `python main.py` or `python -m main`</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span>
</span></span></code></pre></div><blockquote><p>Con <code>python -m &lt;ruta_a_módulo></code> estamos ejecutando un módulo de un paquete como un script.</p></blockquote><p>Quizás no sea muy común ejecutar un módulo desde línea de comandos, pero a veces algunos paquetes están pensandos para ser ejecutados así de forma adicional, por ejemplo <a href=https://docs.python.org/3/library/timeit.html#module-timeit>timeit</a>.</p><p>Sabiendo esto, ¿Por qué entonces se usa este snippet? Para evitar que nuestra aplicación se ejecute 2 veces&mldr; cierto es que es un <em>corner-case</em>, pero no sería la primera vez que sucede. Para verlo mejor hagamos un ejemplo <em>&ldquo;forzado&rdquo;</em> (lo sé) con 2 ficheros, <code>main.py</code> y <code>foo.py</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>foo</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;__name__ for main.py&#34;</span><span class=p>,</span> <span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>a_useful_function</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>pass</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># The trick for this example is to comment / uncomment this next line, if __name__ == &#39;__main__&#39;: and see what happens</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;This is my entry point and it should be executed only once time&#34;</span><span class=p>)</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>foo</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=c1># I need to use a function that it&#39;s in main.py, but main.py is importing me also</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=o>.</span><span class=n>a_useful_function</span><span class=p>()</span>
</span></span></code></pre></div><p>Con nuestro amigo <code>if __name__ == '__main__':</code> hemos salvado el <em>match-ball</em>. La salida por consola es la siguiente:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=vm>__name__</span> <span class=k>for</span> <span class=n>main</span><span class=o>.</span><span class=n>py</span> <span class=n>main</span>
</span></span><span class=line><span class=cl><span class=vm>__name__</span> <span class=k>for</span> <span class=n>main</span><span class=o>.</span><span class=n>py</span> <span class=n>__main__</span>
</span></span><span class=line><span class=cl><span class=n>This</span> <span class=ow>is</span> <span class=n>my</span> <span class=n>entry</span> <span class=n>point</span> <span class=ow>and</span> <span class=n>it</span> <span class=n>should</span> <span class=n>be</span> <span class=n>executed</span> <span class=n>only</span> <span class=n>once</span> <span class=n>time</span></span></span></code></pre></td></tr></table></div></div><ul><li>1 es <code>main</code> cuando fue importado por <code>foo.py</code></li><li>2 es <code>__main__</code> cuando fue ejecutado con <code>python main.py</code></li></ul><p>Ahora (y por algún extrano motivo), alguien comenta (o peor, no incluyó de inicio) la línea <code>if __name__ == '__main__':</code> y la salida es muy distinta:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=vm>__name__</span> <span class=k>for</span> <span class=n>main</span><span class=o>.</span><span class=n>py</span> <span class=n>main</span>
</span></span><span class=line><span class=cl><span class=n>This</span> <span class=ow>is</span> <span class=n>my</span> <span class=n>entry</span> <span class=n>point</span> <span class=ow>and</span> <span class=n>it</span> <span class=n>should</span> <span class=n>be</span> <span class=n>executed</span> <span class=n>only</span> <span class=n>once</span> <span class=n>time</span>
</span></span><span class=line><span class=cl><span class=vm>__name__</span> <span class=k>for</span> <span class=n>main</span><span class=o>.</span><span class=n>py</span> <span class=n>__main__</span>
</span></span><span class=line><span class=cl><span class=n>This</span> <span class=ow>is</span> <span class=n>my</span> <span class=n>entry</span> <span class=n>point</span> <span class=ow>and</span> <span class=n>it</span> <span class=n>should</span> <span class=n>be</span> <span class=n>executed</span> <span class=n>only</span> <span class=n>once</span> <span class=n>time</span>
</span></span></code></pre></div><p>Ups, acabamos de ejecutar todo nuestro maravilloso programa 2 veces 😒, no mola.</p><p>Retomando el hilo de <code>__main__.py</code> ¿Cuándo ejecutará &ldquo;automáticamente&rdquo; este fichero Python? Cuando se use <code>python -m &lt;package></code> en vez de <code>python &lt;file.py></code>. En este caso, Python ejecutará (si lo encuentra) un fichero <code>__main__.py</code> dentro del paquete/directorio especificado. Se usa, normalmente, para dotar a nuestros paquetes de un <em>CLI</em> y suelen ser ficheros <em>pequeños</em> que parsean la parámetros de la línea de comandos y ponen a trabajar a otros módulos. Cabe mencionar que <a href=https://docs.python.org/3/library/__main__.html#id1>no se suele usar</a> el snippet <code>if __name__ == '__main__':</code> en el fichero <code>__main__.py</code>.</p><p>Para hacer la prueba, bastaría con agregar el fichero <code>__main__.py</code> en <code>a_package\a_subpackage</code> y ejecutar <code>python -m a_package.a_subpackage</code>.</p><p>Otra decisión importante a tomar en cualquier proyecto es el estilo de <code>import</code> a usar.</p><p>Para conocer las diferencias entre un <em>import absoluto</em> y uno <em>relativo explícito</em> (también existe el <em>relativo implícito</em> pero se desaconseja su uso), te recomiendo leer el siguiente post, <a href=https://realpython.com/absolute-vs-relative-python-imports/>Absolute vs Relative Imports in Python</a>. Además, de nuevo en <a href=https://peps.python.org/pep-0008/#imports>PEP 8</a> hay una sección dedicada al tema.</p><blockquote><p>Un import relativo explícito comienza por un punto, si no lleva punto - y no es absoluto - es implícito.</p></blockquote><p><code>import a_package.a_module</code> desde <code>main.py</code> es un <em>import absoluto</em> porque incluye toda la ruta desde la raíz del proyecto. Python es capaz de encontrar en <code>sys.path</code> el paquete <code>a_package</code> porque el directorio donde esté el fichero <code>.py</code> siendo ejecutado (en nuestro caso, <code>main.py</code> ) es agregado automáticamente a <code>sys.path</code>. Luego resuelve satisfactoriamente <code>a_package</code> porque está dentro de <code>project\</code>. Fijarse que se agrega el directorio donde esté el fichero <code>.py</code>, no el directorio actual desde donde estamos ejecutando el comando. Es decir, daría igual hacer <code>python main.py</code> en <code>project\</code> que <code>python ..\main.py</code> estando en la carpeta <code>project\a_package\</code>, lo que terminará igualmente en <code>sys.path</code> será el directorio donde esté <code>main.py</code>, que es <code>project\</code>).</p><blockquote><p>Un import absoluto es sencillo. Estés donde estés, siempre usa la ruta completa al módulo o paquete comenzando por la raíz del proyecto.</p></blockquote><p>Todo esto es sencillo de comprobar volcando <code>sys.path</code> por consola y ejecutando <code>main.py</code> desde distintas carpetas del proyecto.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s1>&#39;</span><span class=se>\n</span><span class=s1>&#39;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>path</span><span class=p>))</span>
</span></span></code></pre></div><p>Por otro lado, los <em>import relativos</em> permiten cargar un módulo con una ruta relativa al actual <em>&ldquo;nombre del módulo&rdquo;</em>. En este contexto, el nombre del módulo no es su nombre de fichero y el directorio donde esté, esto a Python le da igual. El nombre del módulo es o bien <code>__package__ + '.' + __name__</code> si <code>__package__</code> no es <code>None</code>, o bien directamente <code>__name__</code>. Si por ejemplo el nombre del módulo es <code>a_package.a_module</code> y se encuentra un <code>from .a_subpackage import another_module</code> lo podrá resolver porque <code>.a_subpackage</code> es como si hubieramos escrito <code>from a_package.a_subpackage import another_module</code>.</p><blockquote><p>Hay una regla de oro que funciona muy bien y es <em>&ldquo;tiene que haber tantos puntos en el nombre del módulo como puntos en la ruta relativa del import&rdquo;</em>.</p></blockquote><p>Por cierto, para un módulo ejecutado (<code>"__main__"</code> en <code>__name__</code> y <code>None</code> en <code>__package__</code>, es decir, <code>python &lt;fichero>.py</code>), olvídate de import relativos. Es imposible resolver algo relativo a &ldquo;ningún&rdquo; paquete porque no se tiene información sobre el nombre del módulo. Ahí es cuando probablemente tengas el siguiente error <code>ImportError: attempted relative import with no known parent package</code>, que básicamente viene a decir que segun el nombre del módulo, Python no sabe a que paquete pertenece el módulo actual y por ende, poca ruta relativa puede resolver. Si hacemos <code>python -m directorio.main.py</code> si funcionaría porque <code>__package__</code> sería <code>directorio</code>. Otro error muy típico es <em>&ldquo;pasarte con los puntos&rdquo;</em>. Si usamos más puntos de los que hay en el nombre del módulo, Python nos dará el siguiente error: <code>ImportError: attempted relative import beyond top-level package</code>. Básicamente, no seguiste la <em>regla de oro</em> y usaste puntos por encima de tus posibilidades. También podemos concluir que puedes usar un import relativo siempre dentro del contexto de tus paquetes ancestros (con cualquier número de puntos), pero no puedes alcanzar la raíz del proyecto y luego querer moverte a otro paquete hermano a nivel superior. Es decir, desde un módulo de <code>a_package</code> no se podría hacer un import relativo a un módulo de <code>other_package</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>project\
</span></span><span class=line><span class=cl>    a_package\
</span></span><span class=line><span class=cl>        __init__.py
</span></span><span class=line><span class=cl>        ...
</span></span><span class=line><span class=cl>    other_package\
</span></span><span class=line><span class=cl>        __init__.py
</span></span><span class=line><span class=cl>        ...
</span></span><span class=line><span class=cl>    main.py
</span></span></code></pre></div><p>Para ver en acción el valor de los nombres de módulo, hagamos un ejemplo:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># main.py</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;main.py =&#34;</span><span class=p>,</span> <span class=n>__package__</span><span class=p>,</span> <span class=s2>&#34;,&#34;</span><span class=p>,</span>  <span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>a_package.a_module</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># a_package\a_module.py</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;a_module.py =&#34;</span><span class=p>,</span> <span class=n>__package__</span><span class=p>,</span> <span class=s2>&#34;,&#34;</span><span class=p>,</span>  <span class=vm>__name__</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>a_package.a_subpackage</span> <span class=kn>import</span> <span class=n>another_module</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># a_package\a_subpackage\another_module.py</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=s2>&#34;another_module.py =&#34;</span><span class=p>,</span> <span class=n>__package__</span><span class=p>,</span> <span class=s2>&#34;,&#34;</span><span class=p>,</span>  <span class=vm>__name__</span><span class=p>)</span>
</span></span></code></pre></div><p>Con <code>python main.py</code> el resultado es el siguiente:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>main</span><span class=p>.</span><span class=nx>py</span> <span class=p>=</span> <span class=nx>None</span> <span class=p>,</span> <span class=nx>__main__</span>
</span></span><span class=line><span class=cl><span class=nx>a_module</span><span class=p>.</span><span class=nx>py</span> <span class=p>=</span> <span class=nx>a_package</span> <span class=p>,</span> <span class=nx>a_package</span><span class=p>.</span><span class=nx>a_module</span>
</span></span><span class=line><span class=cl><span class=nx>another_module</span><span class=p>.</span><span class=nx>py</span> <span class=p>=</span> <span class=nx>a_package</span><span class=p>.</span><span class=nx>a_subpackage</span> <span class=p>,</span> <span class=nx>a_package</span><span class=p>.</span><span class=nx>a_subpackage</span><span class=p>.</span><span class=nx>another_module</span>
</span></span></code></pre></div><p>Sin embargo con <code>python .\a_package\a_module.py</code> nos dará un error porque no puede resolver <code>from a_package...</code>, y esto es porque se agregó a <code>sys.path</code> el directorio <code>project\a_package\</code>, y no <code>project\</code> como en el caso anterior.</p><p>Si está contra la espada y la pared, se puede modificar <code>sys.path</code> en tiempo de ejecución&mldr; cosa que, personalmente no me gusta e intento evitar siempre. No obstante, con el siguiente código se añadiría el directorio padre de <code>a_package\</code> a <code>sys.path</code>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># a_package\a_module.py</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>os</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=c1># Add the parent directory to the path</span>
</span></span><span class=line><span class=cl>    <span class=n>sys</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>dirname</span><span class=p>(</span><span class=n>os</span><span class=o>.</span><span class=n>path</span><span class=o>.</span><span class=n>abspath</span><span class=p>(</span><span class=vm>__file__</span><span class=p>))))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># ...</span>
</span></span></code></pre></div><p>Finalmente, y en cuanto a directorios recomendados para un proyecto, me gusta la siguiente estructura donde se opta por la vía de <a href="https://docs.pytest.org/en/7.1.x/explanation/goodpractices.html?highlight=tests%20outside#tests-outside-application-code">Tests outside application code</a> según las buenas prácticas de <a href=https://docs.pytest.org/>pytest</a>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>    YourProject\
</span></span><span class=line><span class=cl>        src\
</span></span><span class=line><span class=cl>            a_package
</span></span><span class=line><span class=cl>                __init__.py
</span></span><span class=line><span class=cl>                main.py
</span></span><span class=line><span class=cl>        tests\
</span></span><span class=line><span class=cl>            ...
</span></span></code></pre></div><p>Si trabajas con PyCharm, usa <em>Mark Directory as > Sources Root</em> en la carpeta <code>src\</code> y así se agregará a sys.path y PyCharm estará conforme con imports del tipo <code>import a_package</code> y similar.</p><p>En cuanto a <code>pytest</code> es necesario configurar <a href="https://docs.pytest.org/en/7.1.x/reference/reference.html?highlight=pythonpath#confval-pythonpath">pythonpath</a> para que esté al tanto de la carpeta <code>src\</code>. Se haría así en el fichero <code>pyproject.toml</code> (si lo estás usando en vez de <code>pytest.ini</code>):</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-toml data-lang=toml><span class=line><span class=cl><span class=p>[</span><span class=nx>tool</span><span class=p>.</span><span class=nx>pytest</span><span class=p>.</span><span class=nx>ini_options</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=nx>pythonpath</span> <span class=p>=</span> <span class=s2>&#34;src/&#34;</span>
</span></span></code></pre></div><p>Por último, si quieres una plantilla de <a href=https://github.com/cookiecutter/cookiecutter>cookiecutter</a> lista con soporte adicional para pyspark, inyección de dependencias e incluso GitHub Actions que despliegan en un feed de Azure DevOps (todo ello opcional), la puedes encontrar en <a href=https://github.com/panicoenlaxbox/cookiecutter-pythonpackage>https://github.com/panicoenlaxbox/cookiecutter-pythonpackage</a></p><p>Un saludo!</p><div class=blog-tags><a href=https://panicoenlaxbox.com/tags/python/>python</a>&nbsp;
<a href=https://panicoenlaxbox.com/tags/pycharm/>pycharm</a>&nbsp;</div><hr><section id=social-share><div class="list-inline footer-links"><div class=share-box aria-hidden=true><ul class=share><li><a href="//twitter.com/share?url=https%3a%2f%2fpanicoenlaxbox.com%2fpost%2forganizacion-proyecto-python%2f&text=Organizaci%c3%b3n%20de%20un%20proyecto%20de%20Python&via=panicoenlaxbox" target=_blank title="Share on Twitter"><i class="fab fa-twitter"></i></a></li><li><a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fpanicoenlaxbox.com%2fpost%2forganizacion-proyecto-python%2f&title=Organizaci%c3%b3n%20de%20un%20proyecto%20de%20Python" target=_blank title="Share on LinkedIn"><i class="fab fa-linkedin"></i></a></li></ul></div></div></section><h4 class=see-also>Ver también</h4><ul><li><a href=/post/setup-m%C3%ADnimo-python/>Setup mínimo en python</a></li><li><a href=/post/alternativas-a-class-en-python/>Alternativas a class en Python</a></li><li><a href=/post/mocking-vs-patching-python/>Mocking vs patching en Python</a></li><li><a href=/post/powershell-prompt/>No sin mi prompt</a></li><li><a href=/post/duck-typing-python/>Duck typing en python</a></li></ul></article><ul class="pager blog-pager"><li class=previous><a href=https://panicoenlaxbox.com/post/new-dotnet-test-project/ data-toggle=tooltip data-placement=top title=".NET test project with a single command">&larr; Artículo anterior</a></li><li class=next><a href=https://panicoenlaxbox.com/post/configuration-and-secrets-in-asp-net-core/ data-toggle=tooltip data-placement=top title="Configuración y secretos en ASP.NET Core con Azure Key Vault y Azure App Configuration">Artículo siguiente &rarr;</a></li></ul><div class=disqus-comments><button id=show-comments class="btn btn-default" type=button>Mostrar <span class=disqus-comment-count data-disqus-url=https://panicoenlaxbox.com/post/organizacion-proyecto-python>comentarios</span></button><div id=disqus_thread></div><script type=text/javascript>var disqus_config=function(){this.page.url="https://panicoenlaxbox.com/post/organizacion-proyecto-python"}</script></div></div></div></div><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href=mailto:panicoenlaxbox@gmail.com title="Email me"><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://github.com/panicoenlaxbox title=GitHub><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://twitter.com/panicoenlaxbox title=Twitter><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i></span></a></li><li><a href=https://linkedin.com/in/sergio-le%c3%b3n-gonz%c3%a1lez-49412642 title=LinkedIn><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li><li><a href title=RSS><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="credits copyright text-muted">Sergio León
&nbsp;&bull;&nbsp;&copy;
2023
&nbsp;&bull;&nbsp;
<a href=https://panicoenlaxbox.com>Programación desordenada</a></p><p class="credits theme-by text-muted"><a href=https://gohugo.io>Hugo v0.110.0</a> alimentada &nbsp;&bull;&nbsp; Tema <a href=https://github.com/halogenica/beautifulhugo>Beautiful Hugo</a> adaptado de <a href=https://deanattali.com/beautiful-jekyll/>Beautiful Jekyll</a></p></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js integrity=sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js integrity=sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe crossorigin=anonymous></script>
<script src=https://code.jquery.com/jquery-1.12.4.min.js integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin=anonymous></script>
<script src=https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js integrity=sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa crossorigin=anonymous></script>
<script src=https://panicoenlaxbox.com/js/main.js></script>
<script src=https://panicoenlaxbox.com/js/highlight.min.js></script>
<script>hljs.initHighlightingOnLoad()</script><script>$(document).ready(function(){$("pre.chroma").css("padding","0")})</script><script>renderMathInElement(document.body)</script><script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js integrity=sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy crossorigin=anonymous></script>
<script src=https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js integrity=sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q crossorigin=anonymous></script><script src=https://panicoenlaxbox.com/js/load-photoswipe.js></script>
<script type=text/javascript>$(function(){$("#show-comments").on("click",function(){var e="panicoenlaxbox-github-io";(function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)})(),$(this).hide()})})</script><script id=dsq-count-scr src=//panicoenlaxbox-github-io.disqus.com/count.js async></script></body></html>